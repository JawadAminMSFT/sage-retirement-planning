# ============================================================================
# Sage Retirement Planning - Backend Environment Configuration
# ============================================================================

# ============================================================================
# Azure OpenAI Configuration
# ============================================================================

# Azure OpenAI Project Endpoint
PROJECT_ENDPOINT=https://your-project.openai.azure.com

# Model Configuration
MODEL_DEPLOYMENT_NAME=gpt-4

# ============================================================================
# Azure Active Directory (AAD) Authentication
# ============================================================================
# The application uses AAD authentication for Azure services
# Choose ONE of the following options:

# Option 1: Local Development (Azure CLI) - Recommended for Dev
# --------------------------------------------------------------
# Install Azure CLI: https://docs.microsoft.com/cli/azure/install-azure-cli
# Run: az login
# DefaultAzureCredential will automatically use your Azure CLI credentials
# No environment variables needed for this option

# Option 2: Service Principal (Production) - Recommended for Prod
# ----------------------------------------------------------------
# Create service principal:
#   az ad sp create-for-rbac --name "sage-app-sp" \
#     --role "Cognitive Services OpenAI User" \
#     --scopes /subscriptions/<sub-id>/resourceGroups/<rg>/providers/Microsoft.CognitiveServices/accounts/<resource>
#
# Then set these variables from the output:
# AZURE_CLIENT_ID=your-app-id-from-service-principal
# AZURE_TENANT_ID=your-tenant-id-from-service-principal
# AZURE_CLIENT_SECRET=your-password-from-service-principal

# Option 3: Managed Identity (Azure Hosting) - Best for Azure
# ------------------------------------------------------------
# Enable managed identity on your Azure resource (App Service, Container App, etc.)
# Assign "Cognitive Services OpenAI User" role to the managed identity
# No environment variables needed - DefaultAzureCredential will auto-detect

# ============================================================================
# Azure Voice Live Configuration (Real-Time Voice API)
# ============================================================================

# Azure OpenAI Endpoint for Real-Time Voice API
AZURE_REALTIME_ENDPOINT=https://your-resource.openai.azure.com

# Voice Model Deployment Name (MUST be a realtime model: gpt-4o-realtime-preview)
# Deploy via Azure Portal or CLI:
#   az cognitiveservices account deployment create \
#     --name <resource-name> --resource-group <rg> \
#     --deployment-name gpt-4o-realtime-preview \
#     --model-name gpt-4o-realtime-preview --model-version 2024-12-17 \
#     --model-format OpenAI --sku-capacity 1 --sku-name GlobalStandard
VOICE_MODEL_DEPLOYMENT=gpt-4o-realtime-preview

# Default Voice (alloy, echo, fable, onyx, nova, shimmer)
VOICE_DEFAULT_VOICE=alloy

# Turn Detection Mode (server_vad = automatic VAD detection, none = manual control)
# server_vad: Microphone stays on continuously, VAD detects when you speak and finish
# none: Requires manual end_turn signal from client
VOICE_TURN_DETECTION_MODE=server_vad

# Voice Activity Detection (VAD) Threshold (0.0 - 1.0)
# Lower = more sensitive, Higher = less sensitive
# Only applies when VOICE_TURN_DETECTION_MODE=server_vad
VOICE_VAD_THRESHOLD=0.5

# Silence Duration for End of Turn Detection (milliseconds)
# Amount of silence before VAD considers speech ended
# Only applies when VOICE_TURN_DETECTION_MODE=server_vad
VOICE_SILENCE_DURATION_MS=700

# Audio Sample Rate (Hz) - Default: 24000 (24kHz)
VOICE_SAMPLE_RATE=24000

# ============================================================================
# WebSocket Configuration
# ============================================================================

# Maximum Concurrent WebSocket Connections
WS_MAX_CONNECTIONS=100

# WebSocket Connection Timeout (seconds)
WS_CONNECTION_TIMEOUT=300

# ============================================================================
# Server Configuration
# ============================================================================

# Server Port
PORT=8172

# CORS Origins (comma-separated for multiple origins)
CORS_ORIGINS=http://localhost:3847,http://localhost:3000

# Environment (development, staging, production)
ENVIRONMENT=development

# ============================================================================
# Storage Configuration
# ============================================================================

# Local storage path for conversations and data
STORAGE_PATH=./data

# ============================================================================
# Logging Configuration
# ============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log File Path (optional, if not set logs only to console)
# LOG_FILE=./logs/app.log

# ============================================================================
# Optional: Azure Evaluation Configuration
# ============================================================================

# Enable/disable AI agent evaluations
# EVALUATIONS_ENABLED=false

# Evaluation model configuration
# EVALUATION_MODEL_DEPLOYMENT=gpt-4
# EVALUATION_ENDPOINT=https://your-evaluation-endpoint.openai.azure.com
